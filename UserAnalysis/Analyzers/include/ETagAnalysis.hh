#ifndef ETagAnalysis_h
#define ETagAnalysis_h 1

#include <TRandom3.h>
#include "utlConfigParser.hh"
#include "PadmeAnalysisEvent.hh"
#include "HistoSvc.hh"

class ETagAnalysis {

public:

  ETagAnalysis(TString c = "config/UserAnalysis.conf", Int_t v = 0);
  ~ETagAnalysis();

  Bool_t Init(PadmeAnalysisEvent*);
  Bool_t Process();
  Bool_t Finalize();

  Double_t GetNPoT() { return fNPoT; }

private:

  Bool_t InitHistos();

  //  TRandom3* fRndm;

  Int_t fVerbose;

  PadmeAnalysisEvent* fEvent;

  utl::ConfigParser* fCfgParser;

  HistoSvc* fHS;

  Double_t fNPoT;
  Double_t fXPos;
  Double_t fYPos;

  std::vector<double> vNPoT;
  std::vector<double> vNEvt;
  Int_t Neve;
  Double_t TotPoT;
  Double_t TotPoTPhys;
  Double_t TotPoTNoPhys;
  Double_t TotPoTOver30K;
  Double_t TotPoTOver5K;

  std::map<int, std::pair<int,int>> PosMap = {
	{0, {0, 0}},
	{1, {0, 1}},
	{2, {0, 2}},
	{3, {0, 3}},
	{100, {0, 4}},
	{101, {0, 5}},
	{102, {0, 6}},
	{103, {0, 7}},
	{200, {0, 8}},
	{201, {0, 9}},
	{202, {0, 10}},
	{203, {0, 11}},
	{300, {0, 12}},
	{301, {0, 13}},
	{302, {0, 14}},
	{303, {0, 15}},
	{400, {0, 16}},
	{401, {0, 17}},
	{402, {0, 18}},
	{403, {0, 19}},
	{500, {0, 20}},
	{501, {0, 21}},
	{502, {0, 22}},
	{503, {0, 23}},
	{600, {0, 24}},
	{601, {0, 25}},
	{602, {0, 26}},
	{603, {0, 27}},
	{700, {0, 28}},
	{701, {0, 29}},
	{702, {0, 30}},
	{703, {0, 31}},
	{800, {0, 32}},
	{801, {0, 33}},
	{802, {0, 34}},
	{803, {0, 35}},
	{900, {0, 36}},
	{901, {0, 37}},
	{902, {0, 38}},
	{903, {0, 39}},
	{1000, {0, 40}},
	{1001, {0, 41}},
	{1002, {0, 42}},
	{1003, {0, 43}},
	{1100, {0, 44}},
	{1101, {0, 45}},
	{1102, {0, 46}},
	{1103, {0, 47}},
	{1200, {0, 48}},
	{1201, {0, 49}},
	{1202, {0, 50}},
	{1203, {0, 51}},
	{1300, {0, 52}},
	{1301, {0, 53}},
	{1302, {0, 54}},
	{1303, {0, 55}},
	{1400, {0, 56}},
	{1401, {0, 57}},
	{1402, {0, 58}},
	{1403, {0, 59}},
	{10, {1, 0}},
	{11, {1, 1}},
	{12, {1, 2}},
	{13, {1, 3}},
	{110, {1, 4}},
	{111, {1, 5}},
	{112, {1, 6}},
	{113, {1, 7}},
	{210, {1, 8}},
	{211, {1, 9}},
	{212, {1, 10}},
	{213, {1, 11}},
	{310, {1, 12}},
	{311, {1, 13}},
	{312, {1, 14}},
	{313, {1, 15}},
	{410, {1, 16}},
	{411, {1, 17}},
	{412, {1, 18}},
	{413, {1, 19}},
	{510, {1, 20}},
	{511, {1, 21}},
	{512, {1, 22}},
	{513, {1, 23}},
	{610, {1, 24}},
	{611, {1, 25}},
	{612, {1, 26}},
	{613, {1, 27}},
	{710, {1, 28}},
	{711, {1, 29}},
	{712, {1, 30}},
	{713, {1, 31}},
	{810, {1, 32}},
	{811, {1, 33}},
	{812, {1, 34}},
	{813, {1, 35}},
	{910, {1, 36}},
	{911, {1, 37}},
	{912, {1, 38}},
	{913, {1, 39}},
	{1010, {1, 40}},
	{1011, {1, 41}},
	{1012, {1, 42}},
	{1013, {1, 43}},
	{1110, {1, 44}},
	{1111, {1, 45}},
	{1112, {1, 46}},
	{1113, {1, 47}},
	{1210, {1, 48}},
	{1211, {1, 49}},
	{1212, {1, 50}},
	{1213, {1, 51}},
	{1310, {1, 52}},
	{1311, {1, 53}},
	{1312, {1, 54}},
	{1313, {1, 55}},
	{1410, {1, 56}},
	{1411, {1, 57}},
	{1412, {1, 58}},
	{1413, {1, 59}}
  };

};
#endif
